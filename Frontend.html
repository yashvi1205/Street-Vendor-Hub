<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Street Vendor Hub</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(to bottom, #1e40af, #3b82f6);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            color: #1f2937;
        }
        .btn {
            background-color: #3b82f6;
            color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            font-size: 1.125rem;
            font-weight: 500;
            transition: background-color 0.3s ease, transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .btn:hover {
            background-color: #2563eb;
            transform: scale(1.05);
        }
        .card {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .input-container {
            position: relative;
            display: flex;
            align-items: center;
        }
        .voice-icon {
            position: absolute;
            right: 0.75rem;
            cursor: pointer;
            color: #6b7280;
        }
        .voice-icon:hover {
            color: #3b82f6;
        }
        select {
            appearance: none;
            background-color: white;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 0.5rem 2.5rem 0.5rem 1rem;
            font-size: 1rem;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.5em;
        }
        #response {
            max-width: 100%;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="flex flex-col items-center p-6">
    <!-- Header -->
    <header class="w-full max-w-lg text-center mb-8">
        <h1 id="title" class="text-3xl font-bold text-white">Street Vendor Hub</h1>
        <p id="subtitle" class="text-lg text-gray-200 mt-2">Grow your business or find local vendors</p>
        <!-- Language Dropdown -->
        <select id="languageSelect" onchange="changeLanguage(this.value)" class="mt-4 w-48">
            <option value="en-IN">🇮🇳 English</option>
            <option value="hi-IN">🇮🇳 Hindi</option>
            <option value="ta-IN">🇮🇳 Tamil</option>
            <option value="te-IN">🇮🇳 Telugu</option>
            <option value="bn-IN">🇮🇳 Bengali</option>
            <option value="mr-IN">🇮🇳 Marathi</option>
            <option value="gu-IN">🇮🇳 Gujarati</option>
            <option value="kn-IN">🇮🇳 Kannada</option>
            <option value="ml-IN">🇮🇳 Malayalam</option>
            <option value="or-IN">🇮🇳 Odia</option>
            <option value="pa-IN">🇮🇳 Punjabi</option>
            <option value="as-IN">🇮🇳 Assamese</option>
            <option value="ne-IN">🇮🇳 Nepali</option>
            <option value="ur-IN">🇮🇳 Urdu</option>
        </select>
    </header>

    <!-- Main Content -->
    <main class="w-full max-w-lg">
        <!-- Toggle between Vendor and Customer -->
        <div class="flex justify-center mb-6">
            <button id="vendorTab" class="btn w-1/2 mr-2">I’m a Vendor</button>
            <button id="customerTab" class="btn w-1/2 bg-gray-400">I’m a Customer</button>
        </div>

        <!-- Vendor Section -->
        <section id="vendorSection" class="card">
            <h2 id="vendorHeader" class="text-xl font-semibold text-indigo-800 mb-4">Vendor Tools</h2>
            <div class="space-y-4">
                <div class="input-container">
                    <input id="vendorQueryInput" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <svg class="voice-icon w-6 h-6" onclick="startVoice('vendor')" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                </div>
                <button class="btn w-full" onclick="createProfile()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                    <span id="createProfile">Create Shop Profile</span>
                </button>
                <button class="btn w-full" onclick="getPricingTips()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span id="pricingTips">Get Pricing Tips</span>
                </button>
                <button class="btn w-full" onclick="getSchemes()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    <span id="schemes">Find Government Schemes</span>
                </button>
            </div>
        </section>

        <!-- Customer Section -->
        <section id="customerSection" class="card hidden">
            <h2 id="customerHeader" class="text-xl font-semibold text-indigo-800 mb-4">Find Local Vendors</h2>
            <div class="space-y-4">
                <div class="input-container">
                    <input id="productInput" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <svg class="voice-icon w-6 h-6" onclick="startVoice('customer')" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                </div>
                <button class="btn w-full" onclick="searchProduct()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    <span id="searchVendors">Search Nearby Vendors</span>
                </button>
            </div>
        </section>
    </main>

    <!-- Response Area -->
    <div id="response" class="w-full max-w-lg card"></div>

    <!-- Footer -->
    <footer class="w-full max-w-lg mt-8 text-center text-gray-200">
        <p>Powered by IBM Cloud & Granite | Built for Street Vendors</p>
    </footer>

    <script>
        // Language translations for UI elements
        const translations = {
            'en-IN': {
                title: 'Street Vendor Hub',
                subtitle: 'Grow your business or find local vendors',
                vendorTab: 'I’m a Vendor',
                customerTab: 'I’m a Customer',
                vendorHeader: 'Vendor Tools',
                customerHeader: 'Find Local Vendors',
                queryPlaceholder: 'Enter query (e.g., How do I set up a QR code?)',
                createProfile: 'Create Shop Profile',
                pricingTips: 'Get Pricing Tips',
                schemes: 'Find Government Schemes',
                searchVendors: 'Search Nearby Vendors',
                productPlaceholder: 'Enter product (e.g., apples)'
            },
            'hi-IN': {
                title: 'स्ट्रीट वेंडर हब',
                subtitle: 'अपना व्यवसाय बढ़ाएं या स्थानीय विक्रेताओं को खोजें',
                vendorTab: 'मैं विक्रेता हूँ',
                customerTab: 'मैं ग्राहक हूँ',
                vendorHeader: 'विक्रेता उपकरण',
                customerHeader: 'स्थानीय विक्रेताओं को खोजें',
                queryPlaceholder: 'क्वेरी दर्ज करें (उदाहरण: QR कोड कैसे सेट करें?)',
                createProfile: 'दुकान प्रोफाइल बनाएं',
                pricingTips: 'मूल्य निर्धारण टिप्स प्राप्त करें',
                schemes: 'सरकारी योजनाएं खोजें',
                searchVendors: 'नजदीकी विक्रेताओं को खोजें',
                productPlaceholder: 'उत्पाद दर्ज करें (उदाहरण: सेब)'
            },
            'ta-IN': {
                title: 'தெரு வியாபாரி மையம்',
                subtitle: 'உங்கள் வணிகத்தை வளர்க்கவும் அல்லது உள்ளூர் விற்பனையாளர்களைக் கண்டறியவும்',
                vendorTab: 'நான் விற்பனையாளர்',
                customerTab: 'நான் வாடிக்கையாளர்',
                vendorHeader: 'விற்பனையாளர் கருவிகள்',
                customerHeader: 'உள்ளூர் விற்பனையாளர்களைக் கண்டறியவும்',
                queryPlaceholder: 'கேள்வியை உள்ளிடவும் (எ.கா., QR குறியீட்டை எவ்வாறு அமைப்பது?)',
                createProfile: 'கடை சுயவிவரத்தை உருவாக்கவும்',
                pricingTips: 'விலை நிர்ணய உதவிக்குறிப்புகளைப் பெறவும்',
                schemes: 'அரசாங்க திட்டங்களைக் கண்டறியவும்',
                searchVendors: 'அருகிலுள்ள விற்பனையாளர்களைக் கண்டறியவும்',
                productPlaceholder: 'தயாரிப்பை உள்ளிடவும் (எ.கா., ஆப்பிள்கள்)'
            },
            'te-IN': {
                title: 'స్ట్రీట్ వెండర్ హబ్',
                subtitle: 'మీ వ్యాపారాన్ని పెంచుకోండి లేదా స్థానిక విక్రేతలను కనుగొనండి',
                vendorTab: 'నేను విక్రేతను',
                customerTab: 'నేను కస్టమర్',
                vendorHeader: 'విక్రేత సాధనాలు',
                customerHeader: 'స్థానిక విక్రేతలను కనుగొనండి',
                queryPlaceholder: 'ప్రశ్నను నమోదు చేయండి (ఉదా., QR కోడ్ ఎలా సెటప్ చేయాలి?)',
                createProfile: 'షాప్ ప్రొఫైల్ సృష్టించండి',
                pricingTips: 'ధరల సలహెಗಳను పడెయిరి',
                schemes: 'ప్రభుత్వ పథకాలను కనుగొనండి',
                searchVendors: 'సమీప విక్రేతలను కనుగొనండి',
                productPlaceholder: 'ఉత్పత్తిని నమోదు చేయండి (ఉదా., ఆపిల్స్)'
            },
            'bn-IN': {
                title: 'স্ট্রিট ভেন্ডর হাব',
                subtitle: 'আপনার ব্যবসা বাড়ান বা স্থানীয় বিক্রেতাদের খুঁজুন',
                vendorTab: 'আমি একজন বিক্রেতা',
                customerTab: 'আমি একজন গ্রাহক',
                vendorHeader: 'বিক্রেতার সরঞ্জাম',
                customerHeader: 'স্থানীয় বিক্রেতাদের খুঁজুন',
                queryPlaceholder: 'প্রশ্ন লিখুন (যেমন, কীভাবে QR কোড সেট আপ করব?)',
                createProfile: 'দোকান প্রোফাইল তৈরি করুন',
                pricingTips: 'মূল্য নির্ধারণ টিপস পান',
                schemes: 'সরকারি প্রকল্প খুঁজুন',
                searchVendors: 'কাছাকাছি বিক্রেতাদের খুঁজুন',
                productPlaceholder: 'পণ্য লিখুন (যেমন, আপেল)'
            },
            'mr-IN': {
                title: 'रस्त्यावरील विक्रेता केंद्र',
                subtitle: 'तुमचा व्यवसाय वाढवा किंवा स्थानिक विक्रेते शोधा',
                vendorTab: 'मी विक्रेता आहे',
                customerTab: 'मी ग्राहक आहे',
                vendorHeader: 'विक्रेता साधने',
                customerHeader: 'स्थानिक विक्रेते शोधा',
                queryPlaceholder: 'प्रश्न प्रविष्ट करा (उदा., QR कोड कसा सेट करायचा?)',
                createProfile: 'दुकान प्रोफाइल तयार करा',
                pricingTips: 'किंमतीबद्दल टिप्स मिळवा',
                schemes: 'सरकारी योजना शोधा',
                searchVendors: 'जवळील विक्रेते शोधा',
                productPlaceholder: 'उत्पादन प्रविष्ट करा (उदा., सफरचंद)'
            },
            'gu-IN': {
                title: 'સ્ટ્રીટ વેન્ડર હબ',
                subtitle: 'તમારો વ્યવસાય વધારો અથવા સ્થાનિક વિક્રેતાઓ શોધો',
                vendorTab: 'હું વિક્રેતા છું',
                customerTab: 'હું ગ્રાહક છું',
                vendorHeader: 'વિક્રેતા સાધનો',
                customerHeader: 'સ્થાનિક વિક্রેતાઓ શોધો',
                queryPlaceholder: 'પ્રશ્ન દાખલ કરો (દા.ત., QR કોડ કેવી રીતે સેટ કરવું?)',
                createProfile: 'દુકાન પ્રોફાઇલ બનાવો',
                pricingTips: 'ભાવ સૂચનો મેળવો',
                schemes: 'સરકારી યોજનાઓ શોધો',
                searchVendors: 'નજીકના વિક્રેતાઓ શોધો',
                productPlaceholder: 'ઉત્પાદન દાખલ કરો (દા.ત., સફરજન)'
            },
            'kn-IN': {
                title: 'ಸ್ಟ್ರೀಟ್ ವೆಂಡರ್ ಹಬ್',
                subtitle: 'ನಿಮ್ಮ ವ್ಯಾಪಾರವನ್ನು ಬೆಳೆಸಿ ಅಥವಾ ಸ್ಥಳೀಯ ಮಾರಾಟಗಾರರನ್ನು ಹುಡುಕಿ',
                vendorTab: 'ನಾನು ಮಾರಾಟಗಾರ',
                customerTab: 'ನಾನು ಗ್ರಾಹಕ',
                vendorHeader: 'ಮಾರಾಟಗಾರರ ಸಾಧನಗಳು',
                customerHeader: 'ಸ್ಥಳೀಯ ಮಾರಾಟಗಾರರನ್ನು ಹುಡುಕಿ',
                queryPlaceholder: 'ಪ್ರಶ್ನೆಯನ್ನು ನಮೂದಿಸಿ (ಉದಾ., QR ಕೋಡ್ ಹೇಗೆ ಸೆಟ್ ಮಾಡುವುದು?)',
                createProfile: 'ಅಂಗಡಿ ಪ್ರೊಫೈಲ್ ರಚಿಸಿ',
                pricingTips: 'ಬೆಲೆ ಸಲಹೆಗಳನ್ನು ಪಡೆಯಿರಿ',
                schemes: 'ಸರ್ಕಾರಿ ಯೋಜನೆಗಳನ್ನು ಹುಡುಕಿ',
                searchVendors: 'ಹತ್ತಿರದ ಮಾರಾಟಗಾರರನ್ನು ಹುಡುಕಿ',
                productPlaceholder: 'ಉತ್ಪನ್ನವನ್ನು ನಮೂದಿಸಿ (ಉದಾ., ಆಪಲ್ಸ್)'
            },
            'ml-IN': {
                title: 'സ്ട്രീറ്റ് വെണ്ടർ ഹബ്',
                subtitle: 'നിന്റെ ബിസിനസ് വളർത്തുക അല്ലെങ്കിൽ പ്രാദേശിക വെണ്ടർമാരെ കണ്ടെത്തുക',
                vendorTab: 'ഞാൻ വെണ്ടർ',
                customerTab: 'ഞാൻ ഉപഭോക്താവ്',
                vendorHeader: 'വെണ്ടർ ടൂളുകൾ',
                customerHeader: 'പ്രാദേശിക വെണ്ടർമാരെ കണ്ടെത്തുക',
                queryPlaceholder: 'ചോദ്യം നൽകുക (ഉദാ., QR കോഡ് എങ്ങനെ സജ്ജമാക്കാം?)',
                createProfile: 'കട പ്രൊഫൈൽ സൃഷ്ടിക്കുക',
                pricingTips: 'വിലനിർദ്ദേശങ്ങൾ നേടുക',
                schemes: 'സർക്കാർ പദ്ധതികൾ കണ്ടെത്തുക',
                searchVendors: 'അടുത്തുള്ള വെണ്ടർമാരെ കണ്ടെത്തുക',
                productPlaceholder: 'ഉൽപ്പന്നം നൽകുക (ഉദാ., ആപ്പിൾ)'
            },
            'or-IN': {
                title: 'ଷ୍ଟ୍ରିଟ୍ ଭେଣ୍ଡର ହବ୍',
                subtitle: 'ଆପଣଙ୍କ ବ୍ୟବସାୟ ବଢାନ୍ତୁ କିମ୍ବା ସ୍ଥାନୀୟ ବିକ୍ରେତାଙ୍କୁ ଖୋଜନ୍ତୁ',
                vendorTab: 'ମୁଁ ବିକ୍ରେତା',
                customerTab: 'ମୁଁ ଗ୍ରାହକ',
                vendorHeader: 'ବିକ୍ରେତା ଉପକରଣ',
                customerHeader: 'ସ୍ଥାନୀୟ ବିକ୍ରେତାଙ୍କୁ ଖୋଜନ୍ତୁ',
                queryPlaceholder: 'ପ୍ରଶ୍ନ ପ୍ରବେଶ କରନ୍ତୁ (ଉଦା., QR କୋଡ୍ କିପରି ସେଟ୍ କରିବେ?)',
                createProfile: 'ଦୋକାନ ପ୍ରୋଫାଇଲ୍ ତିଆରି କରନ୍ତୁ',
                pricingTips: 'ମୂଲ୍ୟ ନିର୍ଦ୍ଧାରଣ ଟିପ୍ସ ପାଆନ୍ତୁ',
                schemes: 'ସରକାରୀ ଯୋଜନା ଖୋଜନ୍ତୁ',
                searchVendors: 'ନିକଟସ୍ଥ ବିକ୍ରେତାଙ୍କୁ ଖୋଜନ୍ତୁ',
                productPlaceholder: 'ଉତ୍ପାଦ ପ୍ରବେଶ କରନ୍ତୁ (ଉଦା., ସେଓ)'
            },
            'pa-IN': {
                title: 'ਸਟਰੀਟ ਵੈਂਡਰ ਹੱਬ',
                subtitle: 'ਆਪਣਾ ਵਪਾਰ ਵਧਾਓ ਜਾਂ ਸਥਾਨਕ ਵਿਕਰੇਤਾਵਾਂ ਨੂੰ ਲੱਭੋ',
                vendorTab: 'ਮੈਂ ਵਿਕਰੇਤਾ ਹਾਂ',
                customerTab: 'ਮੈਂ ਗਾਹਕ ਹਾਂ',
                vendorHeader: 'ਵਿਕਰੇਤਾ ਸਾਧਨ',
                customerHeader: 'ਸਥਾਨਕ ਵਿਕਰੇਤਾਵਾਂ ਨੂੰ ਲੱਭੋ',
                queryPlaceholder: 'ਸਵਾਲ ਦਰਜ ਕਰੋ (ਉਦਾਹਰਨ, QR ਕੋਡ ਕਿਵੇਂ ਸੈਟ ਕਰੀਏ?)',
                createProfile: 'ਦੁਕਾਨ ਪ੍ਰੋਫਾਈਲ ਬਣਾਓ',
                pricingTips: 'ਕੀਮਤ ਸੁਝਾਅ ਪ੍ਰਾਪਤ ਕਰੋ',
                schemes: 'ਸਰਕਾਰੀ ਯੋਜਨਾਵਾਂ ਲੱਭੋ',
                searchVendors: 'ਨੇੜਲੇ ਵਿਕਰੇਤਾਵਾਂ ਨੂੰ ਲੱਭੋ',
                productPlaceholder: 'ਉਤਪਾਦ ਦਰਜ ਕਰੋ (ਉਦਾਹਰਨ, ਸੇਬ)'
            },
            'as-IN': {
                title: 'ৰাস্তাৰ বিক্ৰেতা হাব',
                subtitle: 'আপোনাৰ ব্যৱসায় বৃদ্ধি কৰক বা স্থানীয় বিক্ৰেতা বিচাৰক',
                vendorTab: 'মই বিক্ৰেতা',
                customerTab: 'মই গ্ৰাহক',
                vendorHeader: 'বিক্ৰেতাৰ সঁজুলি',
                customerHeader: 'স্থানীয় বিক্ৰেতা বিচাৰক',
                queryPlaceholder: 'প্ৰশ্ন সুমুৱাওক (উদাহৰণ: QR ক’ড কেনেকৈ স্থাপন কৰিব?)',
                createProfile: 'দোকানৰ প্ৰ’ফাইল তৈয়াৰ কৰক',
                pricingTips: 'মূল্য নিৰ্ধাৰণৰ পৰামৰ্শ লাভ কৰক',
                schemes: 'চৰকাৰী আঁচনি বিচাৰক',
                searchVendors: 'কাষৰীয়া বিক্ৰেতা বিচাৰক',
                productPlaceholder: 'পণ্য সুমুৱাওক (উদাহৰণ: আপেল)'
            },
            'ne-IN': {
                title: 'सडक विक्रेता हब',
                subtitle: 'आफ्नो व्यवसाय बढाउनुहोस् वा स्थानीय विक्रेताहरू खोज्नुहोस्',
                vendorTab: 'म विक्रेता हुँ',
                customerTab: 'म ग्राहक हुँ',
                vendorHeader: 'विक्रेता उपकरणहरू',
                customerHeader: 'स्थानीय विक्रेताहरू खोज्नुहोस्',
                queryPlaceholder: 'प्रश्न प्रविष्ट गर्नुहोस् (उदाहरण: QR कोड कसरी सेट गर्ने?)',
                createProfile: 'पसल प्रोफाइल सिर्जना गर्नुहोस्',
                pricingTips: 'मूल्य सुझावहरू प्राप्त गर्नुहोस्',
                schemes: 'सरकारी योजनाहरू खोज्नुहोस्',
                searchVendors: 'नजिकका विक्रेताहरू खोज्नुहोस्',
                productPlaceholder: 'उत्पादन प्रविष्ट गर्नुहोस् (उदाहरण: स्याउ)'
            },
            'ur-IN': {
                title: 'سٹریٹ وینڈر ہب',
                subtitle: 'اپنا کاروبار بڑھائیں یا مقامی وینڈرز تلاش کریں',
                vendorTab: 'میں وینڈر ہوں',
                customerTab: 'میں گاہک ہوں',
                vendorHeader: 'وینڈر ٹولز',
                customerHeader: 'مقامی وینڈرز تلاش کریں',
                queryPlaceholder: 'سوال درج کریں (مثال کے طور پر، QR کوڈ کیسے سیٹ کریں؟)',
                createProfile: 'دکان پروفائل بنائیں',
                pricingTips: 'قیمتوں کے مشورے حاصل کریں',
                schemes: 'سرکاری اسکیمیں تلاش کریں',
                searchVendors: 'قریبی وینڈرز تلاش کریں',
                productPlaceholder: 'پروڈکٹ درج کریں (مثال کے طور پر، سیب)'
            }
        };

        // Initialize language
        let currentLang = 'en-IN';
        updateLanguage(currentLang);

        // Change language
        function changeLanguage(lang) {
            currentLang = lang;
            updateLanguage(lang);
        }

        // Update UI with selected language
        function updateLanguage(lang) {
            const texts = translations[lang] || translations['en-IN']; // Fallback to English
            document.getElementById('title').innerText = texts.title;
            document.getElementById('subtitle').innerText = texts.subtitle;
            document.getElementById('vendorTab').innerText = texts.vendorTab;
            document.getElementById('customerTab').innerText = texts.customerTab;
            document.getElementById('vendorHeader').innerText = texts.vendorHeader;
            document.getElementById('customerHeader').innerText = texts.customerHeader;
            document.getElementById('vendorQueryInput').placeholder = texts.queryPlaceholder;
            document.getElementById('createProfile').innerText = texts.createProfile;
            document.getElementById('pricingTips').innerText = texts.pricingTips;
            document.getElementById('schemes').innerText = texts.schemes;
            document.getElementById('searchVendors').innerText = texts.searchVendors;
            document.getElementById('productInput').placeholder = texts.productPlaceholder;
        }

        // Toggle between Vendor and Customer sections
        function showSection(type) {
            const vendorSection = document.getElementById('vendorSection');
            const customerSection = document.getElementById('customerSection');
            const vendorTab = document.getElementById('vendorTab');
            const customerTab = document.getElementById('customerTab');

            if (type === 'vendor') {
                vendorSection.classList.remove('hidden');
                customerSection.classList.add('hidden');
                vendorTab.classList.add('bg-indigo-600');
                vendorTab.classList.remove('bg-gray-400');
                customerTab.classList.add('bg-gray-400');
                customerTab.classList.remove('bg-indigo-600');
            } else {
                vendorSection.classList.add('hidden');
                customerSection.classList.remove('hidden');
                vendorTab.classList.add('bg-gray-400');
                vendorTab.classList.remove('bg-indigo-600');
                customerTab.classList.add('bg-indigo-600');
                customerTab.classList.remove('bg-gray-400');
            }
        }

        // Voice Input
        async function startVoice(userType) {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = currentLang;
            recognition.onresult = async (event) => {
                const query = event.results[0][0].transcript;
                document.getElementById('response').innerText = `Processing: ${query}`;

                if (userType === 'vendor') {
                    document.getElementById('vendorQueryInput').value = query;
                    const response = await fetch('/voice_input', {
                        method: 'POST',
                        body: new FormData().append('audio', query)
                    });
                    const data = await response.json();
                    document.getElementById('response').innerText = data.response;
                } else {
                    document.getElementById('productInput').value = query;
                    searchProduct();
                }
            };
            recognition.start();
        }

        // Create Vendor Profile
        async function createProfile() {
            const vendorData = {
                name: prompt(translations[currentLang].queryPlaceholder.split('(')[0] + '(e.g., Ravi’s Fruit Stall):') || 'Ravi’s Fruit Stall',
                location: prompt(translations[currentLang].queryPlaceholder.split('(')[0] + '(e.g., Pune, Camp Area):') || 'Pune, Camp Area',
                products: prompt(translations[currentLang].queryPlaceholder.split('(')[0] + '(e.g., apples, bananas):').split(',') || ['apples', 'bananas'],
                phone: prompt(translations[currentLang].queryPlaceholder.split('(')[0] + '(e.g., 1234567890):') || '1234567890'
            };
            const response = await fetch('/create_profile', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(vendorData)
            });
            const data = await response.json();
            document.getElementById('response').innerText = `Profile Created: ${data.gmb_profile}`;
        }

        // Get Pricing and Promotion Tips
        async function getPricingTips() {
            const location = prompt(translations[currentLang].queryPlaceholder.split('(')[0] + '(e.g., Pune, Camp Area):') || 'Pune, Camp Area';
            const product = prompt(translations[currentLang].productPlaceholder.split('(')[0] + '(e.g., apples):') || 'apples';
            const query = `Suggest pricing for ${product} in ${location}`;
            const response = await fetch('/voice_input', {
                method: 'POST',
                body: new FormData().append('audio', query)
            });
            const data = await response.json();
            document.getElementById('response').innerText = data.response;
        }

        // Get Government Schemes
        async function getSchemes() {
            const query = 'Find government schemes for street vendors';
            const response = await fetch('/voice_input', {
                method: 'POST',
                body: new FormData().append('audio', query)
            });
            const data = await response.json();
            document.getElementById('response').innerText = data.response;
        }

        // Search Products
        async function searchProduct() {
            const product = document.getElementById('productInput').value || 'apples';
            const location = 'Pune, Camp Area'; // Replace with browser geolocation
            const response = await fetch(`/search_product?product=${product}&location=${location}`);
            const data = await response.json();
            document.getElementById('response').innerText = `Found ${data.vendors.length} vendors:\n${data.vendors.map(v => `${v.name} at ${v.location} sells ${v.products.join(', ')}`).join('\n')}`;
        }
    </script>
</body>
</html>